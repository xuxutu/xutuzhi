# 系统数据文件和信息

## 1./etc/passwd

![image-20210417155323336](%E7%B3%BB%E7%BB%9F%E6%95%B0%E6%8D%AE%E6%96%87%E4%BB%B6%E5%92%8C%E4%BF%A1%E6%81%AF.assets/image-20210417155323336.png)	

**各家实现不一样，不能通过该文件获取信息**

```
x:经过shadow加密过后的口令文件
1000 用户id
1000 用户所在组的id
：home/zhaoyong 家目录的位置
/bin/bash 登录shell
```

### 获取用户信息

### **标准出来和稀泥**

```
getpwuid(); //通过uid查询用户信息
struct passwd *getpwuid(uid_t uid);

getpwnam();	//通过name查询用户信息
struct passwd *getpwnam(const char *name);
```

![image-20210417155231362](%E7%B3%BB%E7%BB%9F%E6%95%B0%E6%8D%AE%E6%96%87%E4%BB%B6%E5%92%8C%E4%BF%A1%E6%81%AF.assets/image-20210417155231362.png)



## 2.etc/group

​	getgrgid()
​	getgrgrnam()

## 3./etc/shadow

​    getspnam()
​	ctypt();//用来加密
​	getpass();

![image-20210417155818080](%E7%B3%BB%E7%BB%9F%E6%95%B0%E6%8D%AE%E6%96%87%E4%BB%B6%E5%92%8C%E4%BF%A1%E6%81%AF.assets/image-20210417155818080.png)

加密方式|杂字串



**gcc -o ck checkpwd.c -lcrypt //crypt 需要链接crypt**
//**推荐书籍 应用密码学**



# 加密

## hash

1. **hash加密本质是混淆，因为不能解密** 不可逆
2. 如果原串相同，所得串也相同，防备管理员坚守自盗



## 加密挡不住穷举

**防止穷举**：口令随机校验



## 什么是安全

攻击成本大于收益